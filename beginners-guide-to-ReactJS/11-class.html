<body>
<script crossorigin src="https://unpkg.com/react@16/umd/react.development.js"></script>
<script crossorigin src="https://unpkg.com/react-dom@16/umd/react-dom.production.min.js"></script>
<script src="https://unpkg.com/babel-standalone@6.26.0/babel.min.js"></script>
<div id="root"></div>

<script type="text/babel">
// Our base code.
/*
This code creates a button with a counter.
We have class `Counter` which extends `React.Component`. We pass all of our constructor arguments into super and put our count into our state.

We render a button with a counter that increments when clicked.

The arrow function is ok in `onClick`, but it's a bit verbose/hard to read.


*/

//class Counter extends React.Component {
//  constructor(...args) {
//    super(...args)
//    this.state = {count: 0}
//  }
//  render() {
//    return (
//      <button 
//        onClick={() =>
//          this.setState(({count}) => ({
//            count: count + 1,
//        }))}
//      >
//        {this.state.count}
//      </button>
//    )
//  }
//}

// Here we pull out the `onClick` function into `handleClick()` to try to improve readability. The counter doesn't work anymore! Left off around 0:40

//class Counter extends React.Component {
//  constructor(...args) {
//    super(...args)
//    this.state = {count: 0}
//  }
//  handleClick() {
//          this.setState(({count}) => ({
//            count: count + 1,
//        }))
//  }
//  render() {
//    return (
//      <button 
//        onClick={this.handleClick}
//      >
//        {this.state.count}
//      </button>
//    )
//  }
//}

// Use explicit binding with the builty-in utility `bind` to fix the issue

//class Counter extends React.Component {
//  constructor(...args) {
//    super(...args)
//    this.state = {count: 0}
//  }
//  handleClick() {
//          this.setState(({count}) => ({
//            count: count + 1,
//        }))
//  }
//  render() {
//    return (
//      <button 
//        onClick={this.handleClick.bind(this)}
//      >
//        {this.state.count}
//      </button>
//    )
//  }
//}

// Remove performance bottleneck in `onClick`

//class Counter extends React.Component {
//  constructor(...args) {
//    super(...args)
//    this.state = {count: 0}
//    this.handleClick = this.handleClick.bind(this)
//  }
//  handleClick() {
//          this.setState(({count}) => ({
//            count: count + 1,
//        }))
//  }
//  render() {
//    return (
//      <button 
//        onClick={this.handleClick}
//      >
//        {this.state.count}
//      </button>
//    )
//  }
//}

// Using Public Class Fields

//class Counter extends React.Component {
//  state = {count: 0}
//  handleClick = this.handleClick.bind(this)
//  handleClick() {
//          this.setState(({count}) => ({
//            count: count + 1,
//        }))
//  }
//  render() {
//    return (
//      <button 
//        onClick={this.handleClick}
//      >
//        {this.state.count}
//      </button>
//    )
//  }
//}

// `handleClick` removed from prototype, only on instance

//class Counter extends React.Component {
//  state = {count: 0}
//  handleClick = function() {
//          this.setState(({count}) => ({
//            count: count + 1,
//        }))
//  }.bind(this)
//  render() {
//    return (
//      <button 
//        onClick={this.handleClick}
//      >
//        {this.state.count}
//      </button>
//    )
//  }
//}

// no bind, using arrow functions for lexical this

class Counter extends React.Component {
  state = {count: 0}
  handleClick = () => {
          this.setState(({count}) => ({
            count: count + 1,
        }))
  }
  render() {
    return (
      <button 
        onClick={this.handleClick}
      >
        {this.state.count}
      </button>
    )
  }
}

ReactDOM.render(
  <Counter />,
  document.getElementById('root'),
)
</script>
</body>